<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="description"
      content="ReelingIt: Discover movies, trailers, and more."
    />
    <title>ReelingIt</title>
    <link rel="stylesheet" href="/css/styles.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="manifest" href="/app.webmanifest" />
    <link rel="icon" href="/images/icon.png" />
    <link rel="preload" href="/css/styles.css" as="style" />
    <link rel="preload" href="/js/app.js" as="script" />
    <script src="/js/app.js" type="module" defer></script>
    <base href="/" />
  </head>

  <body>
    <div
      id="global-loader"
      class="loading-wave"
      style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: var(--background-surface);
        z-index: 9999;
        display: flex;
        align-items: center;
        justify-content: center;
      "
    >
      Loading...
    </div>
    <header role="banner">
      <h1>
        <a href="/" aria-label="ReelingIt Home">
          <img src="/images/logo.png" height="35" alt="ReelingIt Logo" />
        </a>
      </h1>
      <nav role="navigation" aria-label="Main Navigation">
        <ul>
          <li><a class="navlink" href="/">Movies</a></li>
          <li><a class="navlink" href="/account/favorites">Favorites</a></li>
          <li><a class="navlink" href="/account/watchlist">Watchlist</a></li>
          <li><a class="navlink" href="/account/">My Account</a></li>
        </ul>
      </nav>
      <div>
        <form
          onsubmit="app.search(event)"
          role="search"
          aria-label="Search Movies"
        >
          <input
            type="search"
            placeholder="Search movies"
            aria-label="Search movies"
          />
        </form>
      </div>
    </header>

    <main role="main" aria-live="polite"></main>

    <dialog
      id="alert-modal"
      aria-modal="true"
      aria-labelledby="alert-modal-title"
      aria-describedby="alert-modal-description"
    >
      <button class="close-btn" aria-label="Close" onclick="app.closeError()">
        &times;
      </button>
      <h2 id="alert-modal-title" class="modal-title">Error</h2>
      <p id="alert-modal-description" class="modal-message">
        Oops! Something went wrong on our end. Please try again in a moment or
        refresh the page.
      </p>
    </dialog>

    <template id="template-home">
      <section
        id="top-10"
        class="vertical-scroll"
        aria-labelledby="top-movies-heading"
      >
        <h2 id="top-movies-heading">This Week's Top Movies</h2>
        <ul role="list"></ul>
      </section>
      <section
        id="random"
        class="vertical-scroll"
        aria-labelledby="random-movies-heading"
      >
        <h2 id="random-movies-heading">Something to watch today</h2>
        <ul role="list"></ul>
      </section>
    </template>

    <template id="template-movie-details">
      <article id="movie" aria-labelledby="movie-title">
        <div class="title-metadata">
          <div class="title-group">
            <h2 id="movie-title">
              <animated-loading elements="2"></animated-loading>
            </h2>
            <h3></h3>
          </div>
          <dl id="metadata" aria-label="Movie Metadata"></dl>
        </div>
        <header>
          <img src="" alt="Movie Poster" loading="lazy" />
          <youtube-embed
            id="trailer"
            data-url=""
            aria-label="Movie Trailer"
          ></youtube-embed>
        </header>
        <h4 class="section-title">Genres</h4>
        <ul id="genres" role="list"></ul>
        <h4 class="section-title">Overview</h4>
        <div class="overview-actions">
          <p id="overview"></p>
          <section id="actions" aria-label="Movie Actions">
            <button aria-label="Add to Favorites">Add to Favorites</button>
            <button aria-label="Add to Watchlist">Add to Watchlist</button>
          </section>
        </div>
        <h4 class="section-title">Cast</h4>
        <ul id="cast" role="list"></ul>
      </article>
    </template>

    <template id="template-movies">
      <section aria-labelledby="search-results-heading">
        <div id="search-header">
          <h2 id="search-results-heading"></h2>
          <section id="filters" aria-label="Search Filters">
            <select
              id="filter"
              onchange="app.searchFilterChange(this.value)"
              aria-label="Filter by Genre"
            >
              <option>Filter by Genre</option>
            </select>
            <select
              id="order"
              onchange="app.searchOrderChange(this.value)"
              aria-label="Sort Order"
            >
              <option value="popularity">Sort by Popularity</option>
              <option value="score">Sort by Score</option>
              <option value="date">Sort by Release Date</option>
              <option value="name">Sort by Name</option>
            </select>
          </section>
        </div>
        <ul id="movies-result" role="list">
          <animated-loading
            data-elements="5"
            data-width="150px"
            data-height="220px"
          >
          </animated-loading>
        </ul>
      </section>
    </template>

    <template id="template-register">
      <section>
        <h2>Register a New Account</h2>
        <form id="register-form" onsubmit="app.register(event)">
          <fieldset>
            <legend>Registration Details</legend>
            <label for="register-name">Name</label>
            <input
              type="text"
              id="register-name"
              placeholder="Name"
              required
              autocomplete="name"
              aria-describedby="name-error"
            />
            <span
              id="name-error"
              class="error-message"
              style="display: none"
            ></span>
            <label for="register-email">Email</label>
            <input
              type="email"
              id="register-email"
              placeholder="Email"
              required
              autocomplete="email"
              aria-describedby="email-error"
            />
            <span
              id="email-error"
              class="error-message"
              style="display: none"
            ></span>
            <label for="register-password">Password</label>
            <input
              type="password"
              id="register-password"
              placeholder="Password"
              required
              autocomplete="new-password"
              aria-describedby="password-error"
            />
            <span
              id="password-error"
              class="error-message"
              style="display: none"
            ></span>
            <label for="register-password-confirm">Confirm Password</label>
            <input
              type="password"
              id="register-password-confirm"
              placeholder="Confirm Password"
              required
              autocomplete="new-password"
              aria-describedby="confirm-error"
            />
            <span
              id="confirm-error"
              class="error-message"
              style="display: none"
            ></span>
          </fieldset>
          <button type="submit">Register</button>
          <p>
            Already have an account?
            <a class="login" href="/account/login">login</a>
          </p>
        </form>
      </section>
    </template>

    <template id="template-login">
      <section>
        <h2>Login into Your Account</h2>
        <form id="login-form" onsubmit="app.login(event)">
          <fieldset>
            <legend>Login Details</legend>
            <label for="login-email">Email</label>
            <input
              type="email"
              id="login-email"
              placeholder="Email"
              required
              autocomplete="email"
              aria-describedby="email-error"
            />
            <span
              id="email-error"
              class="error-message"
              style="display: none"
            ></span>
            <label for="login-password">Password</label>
            <input
              type="password"
              id="login-password"
              placeholder="Password"
              required
              autocomplete="current-password"
              aria-describedby="password-error"
            />
            <span
              id="password-error"
              class="error-message"
              style="display: none"
            ></span>
          </fieldset>
          <button type="submit">Log In</button>
          <p>
            Don't have an account?
            <a class="register" href="/account/register">register</a>.
          </p>
        </form>
      </section>
    </template>

    <template id="template-account">
      <section id="account">
        <h2>You are Logged In</h2>
        <button onclick="app.logout()">Log out</button>
        <button onclick="app.Router.go('/account/favorites')">
          Your Favorites
        </button>
        <button onclick="app.Router.go('/account/watchlist')">
          Your Watchlist
        </button>
      </section>
    </template>

    <footer role="contentinfo">
      <p>copyright &copy; 2025 ReelingIt</p>
    </footer>
  </body>
</html>
